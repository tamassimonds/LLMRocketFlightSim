# Rocket Design Task

## Design Requirements

- **Target Landing Position**: (3000.0m, 5000.0m) - land as close as possible to these coordinates
- **Target Apogee: 1000.0m
- **Wind Conditions**: 5 m/s from E direction

## You are scored off the following
Distance to max apogee
Cost: Cheaper the rocket the better the score
Does it land safely (less than 5 m/s)
Does it not break
Horz distance: How far is it from the intial launch site

#Score func code shown below:
# Apogee accuracy (25% of total score)
    apogee_error_percent = abs(actual_apogee - target_apogee) / target_apogee * 100
    apogee_reward = math.exp(-0.5 * (apogee_error_percent / 20)**2)  # 20% error = 1 sigma
    
    # Cost efficiency (15% of total score)
    cost_reward = math.exp(-0.5 * (total_cost / 1000)**2)  # Scale based on expected cost range
    
    # Safety (20% of total score)
    if structural_failure:
        safety_reward = 0.0
    else:
        # Impact velocity component
        safe_velocity = 10.0  # m/s
        velocity_reward = math.exp(-0.5 * ((impact_velocity - safe_velocity) / 5)**2)
        safety_reward = velocity_reward
    
    # Calculate weighted total reward
    total_reward = (
        0.45 * landing_reward +    # Landing accuracy
        0.35 * apogee_reward +     # Apogee accuracy
        0.15 * cost_reward +       # Cost efficiency
        0.05 * safety_reward       # Safety
    )


## Available Materials

The following materials are available for the rocket components:
aluminum, composite, fiberglass, carbon_fiber, balsa_wood, plywood, ABS_plastic

## Available Motors

Name,Manufacturer,Radius (mm),Length (mm),Dry Mass (kg),Max Thrust (N),Avg Thrust (N),Burn Time (s),Total Impulse (Ns),Isp (s)
Pro75M1670,CTI,75,757,1.815,2200,1533.9,3.9,6023.6,198
AeroTechK700W,AT,54,568,0.732,1029.3,658.7,3.5,2249,177.5
CesaroniM1670,CTI,75,757,3.101,2200,1533.9,3.6,6023.6,198
AeroTechH128W,AT,29,194,0.108,190.5,141.2,1.29,176.5,191.3
CesaroniO3700,CTI,161,957,14.194,4030.3,2836.9,8.2,29930.2,177.8
CesaroniO5800,CTI,150,754,12.418,6395.5,5040.2,5.2,30382.7,222
CesaroniK160,CTI,54,404,0.7,272.2,190.2,9.7,1521.7,182.9

## Design Task

Based on the requirements and available components, design a rocket that will reach the target apogee. Your design should include:

1. Motor selection (choose from the available motors list)
2. Body dimensions and material
3. Nose cone dimensions and material
4. Fin design and material
5. Parachute specifications
6. Launch rail configuration


### Notes
DRC are run on the design so you need to make sure the design is feasible.
Here are some of the checks:
Notes for the tail the top and bottom radius cannot be the same (causes error)
The material must be specified exactly as listed above
The body radius must be greater than the motor radius
Nose cone but by exactly one of the listed 
Don't include any additional python code (other than config. Putting calculation in there is ok like 32/4 but not whole functions

## Response Format

Please provide your design as a Python dictionary that can be directly used in our simulation software. Use the following format:

```python
config = {
    "motor_choice": "MOTOR_NAME",  # Choose from available motors
    "rocket_body": {
        "radius": RADIUS_IN_METERS,  # Body radius in meters (must be greater than motor Radius)
        "length": LENGTH_IN_METERS,  # Body length in meters
        "material": "MATERIAL",  # Choose from available materials
        "thickness": THICKNESS_IN_METERS,  # Wall thickness in meters
    },
    "aerodynamics": {
        "nose_cone": {
            "kind": "SHAPE",  # "conical", "ogive", "elliptical", "tangent", "von karman", "parabolic", "powerseries" or "lvhaack".
            "length": LENGTH_IN_METERS,
            "material": "MATERIAL",
        },
        "fins": {
            "number": NUMBER_OF_FINS,
            "root_chord": LENGTH_IN_METERS,
            "tip_chord": LENGTH_IN_METERS,
            "span": LENGTH_IN_METERS,
            "cant_angle": ANGLE_IN_DEGREES,
            "material": "MATERIAL",
            "thickness": THICKNESS_IN_METERS,
        },
        "tail": {
            "length": LENGTH_IN_METERS,
            "top_radius": RADIUS_IN_METERS,
            "bottom_radius": RADIUS_IN_METERS,
            "material": "MATERIAL",
        },
    },
    "parachutes": {
        "main": {
            "name": "Main",
            "cd_s": AREA,
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
        "drogue": {
            "name": "Drogue",
            "cd_s": AREA,
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
    },
    "launch": {
        "rail_length": LENGTH_IN_METERS, 
        "inclination": ANGLE_IN_DEGREES, #90 is vertical launch
        "heading": ANGLE_IN_DEGREES, # Heading in degrees 0 is up
    },
    "payload": { #point mass as position specified 
        "mass": MASS_IN_KG,
        "position": POSITION_IN_METERS,  # relative to rocket center
    },
}
```


Here's an example valid design. This is not at all indicative of what you should do just an example:

```python
config = {
    "motor_choice": "CesaroniO5800",
    "rocket_body": {
        "radius": 0.1,  # Body radius in meters
        "length": 1.2,    # Body length in meters
        "material": "fiberglass",
        "thickness": 0.01,  # Wall thickness in meters
    },
    "aerodynamics": {
        "nose_cone": {
            "kind": "ogive",
            "length": 0.3,  # Nose cone length in meters
            "material": "composite",
        },
        "fins": {
            "number": 4,
            "root_chord": 0.15,  # Fin root chord in meters
            "tip_chord": 0.075,  # Fin tip chord in meters
            "span": 0.3,         # Fin span in meters
            "cant_angle": 0.5,   # Cant angle in degrees
            "material": "carbon_fiber",
            "thickness": 0.005   # Fin thickness in meters
        },
        "tail": {
            "length": 1.2,  # Tail length in meters
            "top_radius": 0.04,  # Top radius in meters
            "bottom_radius": 0.05,  # Bottom radius in meters
            "material": "carbon_fiber",
        },
    },
    "parachutes": {
        "main": {
            "name": "Main",
            "cd_s": 0.25,  # Main parachute CD_s
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
        "drogue": {
            "name": "Drogue",
            "cd_s": 0.2,  # Drogue parachute CD_s
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
    },
    "launch": {
        "rail_length": 1.2,  # Length of the launch rail in meters
        "inclination": 90,   # Rail inclination in degrees (vertical)
        "heading": 0,        # Launch heading in degrees (straight up)
    },
    "payload": {
        "mass": 0.5,  # Payload mass in kg
        "position": 0.6  # Payload position relative to rocket center in meters
    }
}
```
Before answering you should provide your full reasoning for the design choices you made thinking like a rocket scientist. Run sample calulations, make approximations etc to find best design



=== PREVIOUS ATTEMPTS ===

--- ATTEMPT 1 ---
Design:
### Rocket Design Reasoning

Designing a rocket to meet the specified requirements involves optimizing various parameters to achieve the target apogee, ensure safe landing, minimize costs, and accurately reach the desired landing coordinates. Below is a step-by-step reasoning of the design choices made:

#### 1. **Motor Selection**

**Available Motors:**
- **Pro75M1670:** CTI, 75mm, 3.9s burn time, 2200N max thrust
- **AeroTechK700W:** AT, 54mm, 3.5s burn time, 1029.3N max thrust
- **CesaroniM1670:** CTI, 75mm, 3.6s burn time, 2200N max thrust
- **AeroTechH128W:** AT, 29mm, 1.29s burn time, 190.5N max thrust
- **CesaroniO3700:** CTI, 161mm, 8.2s burn time, 4030.3N max thrust
- **CesaroniO5800:** CTI, 150mm, 5.2s burn time, 6395.5N max thrust
- **CesaroniK160:** CTI, 54mm, 9.7s burn time, 272.2N max thrust

**Selection Reasoning:**
To achieve an apogee of 1000 meters, we need sufficient thrust and burn time. The **CesaroniO5800** motor offers a high thrust of 6395.5N and a burn time of 5.2 seconds, providing ample thrust to reach the desired apogee while maintaining control over the ascent phase. Although it has a higher cost, the efficiency in reaching the target apogee justifies its selection.

#### 2. **Rocket Body Design**

**Calculations:**
- **Body Radius:** The motor has a radius of 150mm (0.15m). To ensure the body radius is greater, we set it to **0.2 meters**.
- **Body Length:** A length of **1.5 meters** provides sufficient space for the payload and structural components.
- **Material:** **Carbon_fiber** is chosen for its high strength-to-weight ratio, ensuring the rocket remains lightweight yet durable.
- **Thickness:** A wall thickness of **0.005 meters** strikes a balance between structural integrity and weight.

#### 3. **Aerodynamics**

**Nose Cone:**
- **Kind:** **Conical** nose cones are simpler to manufacture and provide adequate aerodynamic performance for suborbital flights.
- **Length:** **0.3 meters** to minimize drag while maintaining stability.
- **Material:** **Composite** offers a lightweight and strong structure suitable for high-speed flights.

**Fins:**
- **Number:** **4 fins** provide stability without adding excessive weight.
- **Root Chord:** **0.2 meters**
- **Tip Chord:** **0.1 meters**
- **Span:** **0.25 meters**
- **Cant Angle:** **2 degrees** to enhance aerodynamic stability.
- **Material:** **Aluminum** offers a good balance between strength, weight, and cost.
- **Thickness:** **0.003 meters**

**Tail:**
- **Length:** **0.5 meters**
- **Top Radius:** **0.05 meters**
- **Bottom Radius:** **0.06 meters** (ensuring top and bottom radii are different)
- **Material:** **Aluminum**

#### 4. **Parachute Specifications**

**Main Parachute:**
- **cd_s (Drag Coefficient Area):** **0.4**
- **Trigger:** **Apogee**
- **Sampling Rate:** **105 Hz**
- **Lag:** **1.5 seconds**
- **Noise:** **(0, 8.3, 0.5)**

**Drogue Parachute:**
- **cd_s:** **0.2**
- **Trigger:** **Apogee**
- **Sampling Rate:** **105 Hz**
- **Lag:** **1.5 seconds**
- **Noise:** **(0, 8.3, 0.5)**

#### 5. **Launch Rail Configuration**

**Launch Rail Length:** **2 meters** to accommodate the initial acceleration phase.
**Inclination:** **90 degrees** for a vertical launch to minimize horizontal deviation.
**Heading:** **0 degrees** ensures the rocket is launched straight upwards, relying on wind conditions to drift towards the target landing position.

#### 6. **Payload Specifications**

**Mass:** **0.5 kg** to keep the overall rocket mass low, enhancing thrust-to-weight ratio.
**Position:** **0.75 meters** relative to the rocket center to maintain balance and stability.

### Final Configuration

```python
config = {
    "motor_choice": "CesaroniO5800",
    "rocket_body": {
        "radius": 0.2,  # Body radius in meters
        "length": 1.5,    # Body length in meters
        "material": "carbon_fiber",
        "thickness": 0.005,  # Wall thickness in meters
    },
    "aerodynamics": {
        "nose_cone": {
            "kind": "conical",
            "length": 0.3,  # Nose cone length in meters
            "material": "composite",
        },
        "fins": {
            "number": 4,
            "root_chord": 0.2,  # Fin root chord in meters
            "tip_chord": 0.1,  # Fin tip chord in meters
            "span": 0.25,         # Fin span in meters
            "cant_angle": 2,   # Cant angle in degrees
            "material": "aluminum",
            "thickness": 0.003   # Fin thickness in meters
        },
        "tail": {
            "length": 0.5,  # Tail length in meters
            "top_radius": 0.05,  # Top radius in meters
            "bottom_radius": 0.06,  # Bottom radius in meters
            "material": "aluminum",
        },
    },
    "parachutes": {
        "main": {
            "name": "Main",
            "cd_s": 0.4,  # Main parachute CD_s
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
        "drogue": {
            "name": "Drogue",
            "cd_s": 0.2,  # Drogue parachute CD_s
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
    },
    "launch": {
        "rail_length": 2.0,  # Length of the launch rail in meters
        "inclination": 90,   # Rail inclination in degrees (vertical)
        "heading": 0,        # Launch heading in degrees (straight up)
    },
    "payload": {
        "mass": 0.5,  # Payload mass in kg
        "position": 0.75  # Payload position relative to rocket center in meters
    }
}
```

### Summary of Design Choices

- **Motor Selection:** Chose **CesaroniO5800** for its high thrust and adequate burn time to achieve the target apogee.
- **Material Selection:** Opted for **carbon_fiber** for the body and **aluminum** for fins and tail to balance strength and weight.
- **Aerodynamics:** Designed conical nose and four fins with slight canting for stability.
- **Parachutes:** Selected appropriate drag coefficients to ensure safe landing speeds.
- **Launch Configuration:** Vertical launch with a sufficiently long rail to minimize horizontal drift, relying on wind conditions to reach the target landing coordinates.
- **Payload Placement:** Positioned centrally to maintain balance and stability during flight.

This configuration aims to optimize the rocket's performance, ensuring it reaches the desired apogee, lands safely within the specified velocity constraints, remains cost-effective, and lands as close as possible to the target coordinates under the given wind conditions.
Score: 6.22/100
Target Position: (3000.0m, 5000.0m), Landing Position: (-681.89m, -14.45m), Error: 6221.01m
Structural integrity: PASSED
Cost: $2240.62


Based on previous attempts, please provide an improved rocket design that will precisely land at the target coordinates (3000.0m, 5000.0m).
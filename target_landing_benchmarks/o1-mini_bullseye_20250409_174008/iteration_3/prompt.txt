# Rocket Design Task

## Design Requirements

- **Target Landing Position**: (3000.0m, 5000.0m) - land as close as possible to these coordinates
- **Target Apogee: 1000.0m
- **Wind Conditions**: 20 m/s from E direction

## You are scored off the following
Distance to max apogee
Cost: Cheaper the rocket the better the score
Does it land safely (less than 5 m/s)
Does it not break
Horz distance: How far is it from the intial launch site

#Score func code shown below:
# Apogee accuracy (25% of total score)
    apogee_error_percent = abs(actual_apogee - target_apogee) / target_apogee * 100
    apogee_reward = math.exp(-0.5 * (apogee_error_percent / 20)**2)  # 20% error = 1 sigma
    
    # Cost efficiency (15% of total score)
    cost_reward = math.exp(-0.5 * (total_cost / 1000)**2)  # Scale based on expected cost range
    
    # Safety (20% of total score)
    if structural_failure:
        safety_reward = 0.0
    else:
        # Impact velocity component
        safe_velocity = 10.0  # m/s
        velocity_reward = math.exp(-0.5 * ((impact_velocity - safe_velocity) / 5)**2)
        safety_reward = velocity_reward
    
    # Calculate weighted total reward
    total_reward = (
        0.45 * landing_reward +    # Landing accuracy
        0.35 * apogee_reward +     # Apogee accuracy
        0.15 * cost_reward +       # Cost efficiency
        0.05 * safety_reward       # Safety
    )


## Available Materials

The following materials are available for the rocket components:
aluminum, composite, fiberglass, carbon_fiber, balsa_wood, plywood, ABS_plastic

## Available Motors

Name,Manufacturer,Radius (mm),Length (mm),Dry Mass (kg),Max Thrust (N),Avg Thrust (N),Burn Time (s),Total Impulse (Ns),Isp (s)
Pro75M1670,CTI,75,757,1.815,2200,1533.9,3.9,6023.6,198
AeroTechK700W,AT,54,568,0.732,1029.3,658.7,3.5,2249,177.5
CesaroniM1670,CTI,75,757,3.101,2200,1533.9,3.6,6023.6,198
AeroTechH128W,AT,29,194,0.108,190.5,141.2,1.29,176.5,191.3
CesaroniO3700,CTI,161,957,14.194,4030.3,2836.9,8.2,29930.2,177.8
CesaroniO5800,CTI,150,754,12.418,6395.5,5040.2,5.2,30382.7,222
CesaroniK160,CTI,54,404,0.7,272.2,190.2,9.7,1521.7,182.9

## Design Task

Based on the requirements and available components, design a rocket that will reach the target apogee. Your design should include:

1. Motor selection (choose from the available motors list)
2. Body dimensions and material
3. Nose cone dimensions and material
4. Fin design and material
5. Parachute specifications
6. Launch rail configuration


### Notes
DRC are run on the design so you need to make sure the design is feasible.
Here are some of the checks:
Notes for the tail the top and bottom radius cannot be the same (causes error)
The material must be specified exactly as listed above
The body radius must be greater than the motor radius
Nose cone but by exactly one of the listed 
Don't include any additional python code (other than config. Putting calculation in there is ok like 32/4 but not whole functions

## Response Format

Please provide your design as a Python dictionary that can be directly used in our simulation software. Use the following format:

```python
config = {
    "motor_choice": "MOTOR_NAME",  # Choose from available motors
    "rocket_body": {
        "radius": RADIUS_IN_METERS,  # Body radius in meters (must be greater than motor Radius)
        "length": LENGTH_IN_METERS,  # Body length in meters
        "material": "MATERIAL",  # Choose from available materials
        "thickness": THICKNESS_IN_METERS,  # Wall thickness in meters
    },
    "aerodynamics": {
        "nose_cone": {
            "kind": "SHAPE",  # "conical", "ogive", "elliptical", "tangent", "von karman", "parabolic", "powerseries" or "lvhaack".
            "length": LENGTH_IN_METERS,
            "material": "MATERIAL",
        },
        "fins": {
            "number": NUMBER_OF_FINS,
            "root_chord": LENGTH_IN_METERS,
            "tip_chord": LENGTH_IN_METERS,
            "span": LENGTH_IN_METERS,
            "cant_angle": ANGLE_IN_DEGREES,
            "material": "MATERIAL",
            "thickness": THICKNESS_IN_METERS,
        },
        "tail": {
            "length": LENGTH_IN_METERS,
            "top_radius": RADIUS_IN_METERS,
            "bottom_radius": RADIUS_IN_METERS,
            "material": "MATERIAL",
        },
    },
    "parachutes": {
        "main": {
            "name": "Main",
            "cd_s": AREA,
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
        "drogue": {
            "name": "Drogue",
            "cd_s": AREA,
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
    },
    "launch": {
        "rail_length": LENGTH_IN_METERS, 
        "inclination": ANGLE_IN_DEGREES, #90 is vertical launch
        "heading": ANGLE_IN_DEGREES, # Heading in degrees 0 is up
    },
    "payload": { #point mass as position specified 
        "mass": MASS_IN_KG,
        "position": POSITION_IN_METERS,  # relative to rocket center
    },
}
```


Here's an example valid design. This is not at all indicative of what you should do just an example:

```python
config = {
    "motor_choice": "CesaroniO5800",
    "rocket_body": {
        "radius": 0.1,  # Body radius in meters
        "length": 1.2,    # Body length in meters
        "material": "fiberglass",
        "thickness": 0.01,  # Wall thickness in meters
    },
    "aerodynamics": {
        "nose_cone": {
            "kind": "ogive",
            "length": 0.3,  # Nose cone length in meters
            "material": "composite",
        },
        "fins": {
            "number": 4,
            "root_chord": 0.15,  # Fin root chord in meters
            "tip_chord": 0.075,  # Fin tip chord in meters
            "span": 0.3,         # Fin span in meters
            "cant_angle": 0.5,   # Cant angle in degrees
            "material": "carbon_fiber",
            "thickness": 0.005   # Fin thickness in meters
        },
        "tail": {
            "length": 1.2,  # Tail length in meters
            "top_radius": 0.04,  # Top radius in meters
            "bottom_radius": 0.05,  # Bottom radius in meters
            "material": "carbon_fiber",
        },
    },
    "parachutes": {
        "main": {
            "name": "Main",
            "cd_s": 0.25,  # Main parachute CD_s
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
        "drogue": {
            "name": "Drogue",
            "cd_s": 0.2,  # Drogue parachute CD_s
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
    },
    "launch": {
        "rail_length": 1.2,  # Length of the launch rail in meters
        "inclination": 90,   # Rail inclination in degrees (vertical)
        "heading": 0,        # Launch heading in degrees (straight up)
    },
    "payload": {
        "mass": 0.5,  # Payload mass in kg
        "position": 0.6  # Payload position relative to rocket center in meters
    }
}
```
Before answering you should provide your full reasoning for the design choices you made thinking like a rocket scientist. Run sample calulations, make approximations etc to find best design



=== PREVIOUS ATTEMPTS ===

--- ATTEMPT 1 ---
Design:
Sure, let's walk through the design process step-by-step to ensure that the rocket meets all the specified requirements and optimizes the scoring criteria.

### **1. Motor Selection**

**Available Motors:**

- **Pro75M1670 (CTI)**
  - **Radius:** 75 mm
  - **Length:** 757 mm
  - **Dry Mass:** 1.815 kg
  - **Max Thrust:** 2200 N
  - **Total Impulse:** 6,023.6 Ns

- **CesaroniM1670 (CTI)**
  - **Radius:** 75 mm
  - **Length:** 757 mm
  - **Dry Mass:** 3.101 kg
  - **Max Thrust:** 2200 N
  - **Total Impulse:** 6,023.6 Ns

**Choice:**
- **Pro75M1670** is selected due to its lower dry mass while providing the same total impulse as the CesaroniM1670. This choice helps in reducing the overall weight and cost.

### **2. Rocket Body Design**

- **Radius:** Must be greater than the motor radius (0.075 m). Selected **0.09 m** for good clearance.
- **Length:** **1.0 m** to accommodate the motor and payload.
- **Material:** **Fiberglass** is chosen for its lightweight and strong structural properties.
- **Thickness:** **0.005 m** ensures structural integrity without adding unnecessary weight.

### **3. Nose Cone Design**

- **Shape:** **Conical** for simplicity and effective aerodynamics.
- **Length:** **0.3 m** to provide a streamlined shape.
- **Material:** **Composite** for durability and lightweight characteristics.

### **4. Fins Design**

- **Number:** **4** fins for stable flight characteristics.
- **Root Chord:** **0.15 m**
- **Tip Chord:** **0.075 m** ensuring tapering for aerodynamic efficiency.
- **Span:** **0.25 m** for sufficient control.
- **Cant Angle:** **5 degrees** to counteract wind from the East.
- **Material:** **Carbon_fiber** for strength and minimal weight.
- **Thickness:** **0.005 m** to maintain structural integrity.

### **5. Tail Design**

- **Length:** **0.3 m**
- **Top Radius:** **0.04 m**
- **Bottom Radius:** **0.05 m** (Different from top radius to avoid design errors)
- **Material:** **Carbon_fiber** for consistency and strength.

### **6. Parachute Specifications**

To ensure a safe landing with impact velocity less than 5 m/s:

- **Main Parachute:**
  - **cd_s:** **1.0 m²**
  - **Trigger:** **Apogee**
  - **Sampling Rate:** **105**
  - **Lag:** **1.5 seconds**
  - **Noise:** **(0, 8.3, 0.5)**
  
- **Drogue Parachute:**
  - **cd_s:** **0.6 m²**
  - **Trigger:** **Apogee**
  - **Sampling Rate:** **105**
  - **Lag:** **1.5 seconds**
  - **Noise:** **(0, 8.3, 0.5)**

### **7. Launch Rail Configuration**

- **Rail Length:** **2.0 m** to provide adequate stabilization during launch.
- **Inclination:** **90 degrees** for a vertical launch.
- **Heading:** **270 degrees** to counteract the 20 m/s wind from the East.

### **8. Payload Specifications**

- **Mass:** **0.2 kg** to keep the rocket lightweight.
- **Position:** **0.5 m** from the rocket center to maintain balance.

### **Final Design Configuration**

```python
config = {
    "motor_choice": "Pro75M1670",
    "rocket_body": {
        "radius": 0.09,  # Body radius in meters
        "length": 1.0,    # Body length in meters
        "material": "fiberglass",
        "thickness": 0.005,  # Wall thickness in meters
    },
    "aerodynamics": {
        "nose_cone": {
            "kind": "conical",  # Conical nose cone
            "length": 0.3,  # Nose cone length in meters
            "material": "composite",
        },
        "fins": {
            "number": 4,
            "root_chord": 0.15,  # Fin root chord in meters
            "tip_chord": 0.075,  # Fin tip chord in meters
            "span": 0.25,         # Fin span in meters
            "cant_angle": 5,      # Cant angle in degrees
            "material": "carbon_fiber",
            "thickness": 0.005,   # Fin thickness in meters
        },
        "tail": {
            "length": 0.3,          # Tail length in meters
            "top_radius": 0.04,     # Top radius in meters
            "bottom_radius": 0.05,  # Bottom radius in meters
            "material": "carbon_fiber",
        },
    },
    "parachutes": {
        "main": {
            "name": "Main",
            "cd_s": 1.0,  # Main parachute CD_s
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
        "drogue": {
            "name": "Drogue",
            "cd_s": 0.6,  # Drogue parachute CD_s
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
    },
    "launch": {
        "rail_length": 2.0,    # Length of the launch rail in meters
        "inclination": 90,     # Rail inclination in degrees (vertical)
        "heading": 270,        # Launch heading in degrees (opposite to wind)
    },
    "payload": {
        "mass": 0.2,            # Payload mass in kg
        "position": 0.5,        # Payload position relative to rocket center in meters
    },
}
```

### **Rationale for Design Choices:**

- **Motor Selection:** The Pro75M1670 provides sufficient total impulse to reach the target apogee while keeping the dry mass and cost low.
- **Materials:** Fiberglass and carbon_fiber are chosen for their strength-to-weight ratios, ensuring the rocket remains lightweight yet robust.
- **Aerodynamics:** A conical nose cone and properly sized fins ensure stable and efficient flight. The tail design prevents structural errors by having distinct top and bottom radii.
- **Parachutes:** The combined area of the main and drogue parachutes ensures a safe landing by keeping the impact velocity below the threshold.
- **Launch Configuration:** Aligning the launch heading opposite to the wind minimizes drift, ensuring the rocket lands closer to the target coordinates.
- **Payload:** A lightweight payload reduces the overall mass, contributing to cost efficiency and better apogee performance.

This configuration is designed to balance all scoring aspects effectively, ensuring performance, safety, and cost-efficiency.
Score: 16.41/100
Target Position: (3000.0m, 5000.0m), Landing Position: (-360.30m, 38.71m), Error: 5992.16m
Structural integrity: PASSED
Cost: $752.35

--- ATTEMPT 2 ---
Design:
Sure, let's work through an improved rocket design to better meet the specified requirements and optimize the scoring criteria. We'll address each design component step-by-step, making informed choices based on the available materials and motors.

### **1. Motor Selection**

**Available Motors Analysis:**

- **Pro75M1670 (CTI):** Total Impulse = 6,023.6 Ns
- **CesaroniO5800 (CTI):** Total Impulse = 30,382.7 Ns
- **Others:** Offer varying impulses but none exceed the CesaroniO5800.

**Choice:**
- **CesaroniO5800** is selected due to its high total impulse (~30,382.7 Ns), which is essential to achieve the target apogee of 1,000 meters. Although it has a higher dry mass (12.418 kg) and cost, its performance benefits outweigh these drawbacks for this design goal.

### **2. Rocket Body Design**

- **Radius:** Must be greater than the motor radius (0.15 m). Selected **0.16 m** to ensure adequate clearance.
- **Length:** **2.0 m** to accommodate the motor, payload, and structural components.
- **Material:** **Carbon_fiber** is chosen for its excellent strength-to-weight ratio, providing structural integrity while keeping the rocket lightweight.
- **Thickness:** **0.01 m** ensures the body is robust enough to handle the stresses during launch and flight without adding excessive weight.

### **3. Nose Cone Design**

- **Shape:** **Ogive** for superior aerodynamic efficiency, reducing drag and contributing to better flight stability.
- **Length:** **0.3 m** to provide a streamlined profile that complements the body length.
- **Material:** **Composite** for its lightweight and durable properties, ensuring the nose cone can withstand aerodynamic forces.

### **4. Fins Design**

- **Number:** **4** fins offer a good balance between stability and aerodynamic efficiency.
- **Root Chord:** **0.3 m** provides a substantial base for the fins, enhancing stability.
- **Tip Chord:** **0.15 m** ensures a tapered design that reduces drag.
- **Span:** **0.3 m** for adequate surface area to maintain stable flight.
- **Cant Angle:** **5 degrees** to compensate for the 20 m/s wind from the East, ensuring accurate landing positioning.
- **Material:** **Carbon_fiber** for its strength and minimal weight addition.
- **Thickness:** **0.01 m** to maintain structural integrity.

### **5. Tail Design**

- **Length:** **0.3 m** to provide additional stability at the rear of the rocket.
- **Top Radius:** **0.05 m**
- **Bottom Radius:** **0.06 m** (Different from the top radius to avoid design errors)
- **Material:** **Carbon_fiber** for consistency and structural strength.

### **6. Parachute Specifications**

To ensure a safe landing with an impact velocity of less than 5 m/s:

- **Main Parachute:**
  - **cd_s:** **1.2 m²** to provide sufficient drag for deceleration.
  - **Trigger:** **Apogee** ensures deployment at the peak altitude.
  - **Sampling Rate:** **105**
  - **Lag:** **1.5 seconds**
  - **Noise:** **(0, 8.3, 0.5)**
  
- **Drogue Parachute:**
  - **cd_s:** **0.6 m²** for initial stabilization and controlled descent.
  - **Trigger:** **apogee**
  - **Sampling Rate:** **105**
  - **Lag:** **1.5 seconds**
  - **Noise:** **(0, 8.3, 0.5)**

### **7. Launch Rail Configuration**

- **Rail Length:** **2.0 m** to provide sufficient stabilization during launch.
- **Inclination:** **90 degrees** for a vertical launch.
- **Heading:** **45 degrees** to direct the rocket towards the target coordinates (3000.0m, 5000.0m), accounting for wind drift from the East.

### **8. Payload Specifications**

- **Mass:** **1.0 kg** to keep the rocket lightweight yet capable of carrying necessary instrumentation.
- **Position:** **1.0 m** from the rocket center to maintain balance and center of mass.

### **Final Design Configuration**

```python
config = {
    "motor_choice": "CesaroniO5800",
    "rocket_body": {
        "radius": 0.16,  # Body radius in meters
        "length": 2.0,    # Body length in meters
        "material": "carbon_fiber",
        "thickness": 0.01,  # Wall thickness in meters
    },
    "aerodynamics": {
        "nose_cone": {
            "kind": "ogive",  # Ogive nose cone for better aerodynamics
            "length": 0.3,  # Nose cone length in meters
            "material": "composite",
        },
        "fins": {
            "number": 4,
            "root_chord": 0.3,  # Fin root chord in meters
            "tip_chord": 0.15,  # Fin tip chord in meters
            "span": 0.3,         # Fin span in meters
            "cant_angle": 5,      # Cant angle in degrees
            "material": "carbon_fiber",
            "thickness": 0.01,   # Fin thickness in meters
        },
        "tail": {
            "length": 0.3,          # Tail length in meters
            "top_radius": 0.05,     # Top radius in meters
            "bottom_radius": 0.06,  # Bottom radius in meters
            "material": "carbon_fiber",
        },
    },
    "parachutes": {
        "main": {
            "name": "Main",
            "cd_s": 1.2,  # Main parachute CD_s
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
        "drogue": {
            "name": "Drogue",
            "cd_s": 0.6,  # Drogue parachute CD_s
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
    },
    "launch": {
        "rail_length": 2.0,    # Length of the launch rail in meters
        "inclination": 90,     # Rail inclination in degrees (vertical)
        "heading": 45,         # Launch heading in degrees towards target
    },
    "payload": {
        "mass": 1.0,            # Payload mass in kg
        "position": 1.0,        # Payload position relative to rocket center in meters
    },
}
```

### **Rationale for Design Choices:**

- **Motor Selection:** The **CesaroniO5800** provides a high total impulse (~30,382.7 Ns), which is crucial for reaching the target apogee of 1,000 meters. Despite its higher dry mass, its performance ensures better apogee accuracy.
  
- **Materials:** **Carbon_fiber** and **composite** materials are chosen for their excellent strength-to-weight ratios, ensuring the rocket remains both lightweight and structurally sound, which contributes to cost efficiency and safety.
  
- **Aerodynamics:** An **ogive** nose cone minimizes drag, while appropriately sized fins with a cant angle counteract wind drift, ensuring the rocket lands closer to the target coordinates. The distinct top and bottom radii in the tail design prevent structural errors.
  
- **Parachutes:** The combined area of the main and drogue parachutes ensures effective deceleration, maintaining impact velocities below the 5 m/s threshold for safe landings.
  
- **Launch Configuration:** Launching at a **45-degree heading** directs the rocket towards the target coordinates while compensating for the easterly wind. The vertical inclination aids in achieving the necessary apogee.
  
- **Payload:** A **1.0 kg** payload provides necessary instrumentation without significantly impacting the rocket's performance, balancing between functionality and cost efficiency.

This enhanced configuration is designed to significantly improve the apogee accuracy, ensure safe landing velocities, and position the rocket close to the target coordinates while maintaining cost-effectiveness and structural integrity.
Score: 5.15/100
Target Position: (3000.0m, 5000.0m), Landing Position: (-2230.27m, 73.25m), Error: 7185.30m
Structural integrity: PASSED
Cost: $3149.19


Based on previous attempts, please provide an improved rocket design that will precisely land at the target coordinates (3000.0m, 5000.0m).
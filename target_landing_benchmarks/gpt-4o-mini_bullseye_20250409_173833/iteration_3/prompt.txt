# Rocket Design Task

## Design Requirements

- **Target Landing Position**: (3000.0m, 5000.0m) - land as close as possible to these coordinates
- **Target Apogee: 1000.0m
- **Wind Conditions**: 20 m/s from E direction

## You are scored off the following
Distance to max apogee
Cost: Cheaper the rocket the better the score
Does it land safely (less than 5 m/s)
Does it not break
Horz distance: How far is it from the intial launch site

#Score func code shown below:
# Apogee accuracy (25% of total score)
    apogee_error_percent = abs(actual_apogee - target_apogee) / target_apogee * 100
    apogee_reward = math.exp(-0.5 * (apogee_error_percent / 20)**2)  # 20% error = 1 sigma
    
    # Cost efficiency (15% of total score)
    cost_reward = math.exp(-0.5 * (total_cost / 1000)**2)  # Scale based on expected cost range
    
    # Safety (20% of total score)
    if structural_failure:
        safety_reward = 0.0
    else:
        # Impact velocity component
        safe_velocity = 10.0  # m/s
        velocity_reward = math.exp(-0.5 * ((impact_velocity - safe_velocity) / 5)**2)
        safety_reward = velocity_reward
    
    # Calculate weighted total reward
    total_reward = (
        0.45 * landing_reward +    # Landing accuracy
        0.35 * apogee_reward +     # Apogee accuracy
        0.15 * cost_reward +       # Cost efficiency
        0.05 * safety_reward       # Safety
    )


## Available Materials

The following materials are available for the rocket components:
aluminum, composite, fiberglass, carbon_fiber, balsa_wood, plywood, ABS_plastic

## Available Motors

Name,Manufacturer,Radius (mm),Length (mm),Dry Mass (kg),Max Thrust (N),Avg Thrust (N),Burn Time (s),Total Impulse (Ns),Isp (s)
Pro75M1670,CTI,75,757,1.815,2200,1533.9,3.9,6023.6,198
AeroTechK700W,AT,54,568,0.732,1029.3,658.7,3.5,2249,177.5
CesaroniM1670,CTI,75,757,3.101,2200,1533.9,3.6,6023.6,198
AeroTechH128W,AT,29,194,0.108,190.5,141.2,1.29,176.5,191.3
CesaroniO3700,CTI,161,957,14.194,4030.3,2836.9,8.2,29930.2,177.8
CesaroniO5800,CTI,150,754,12.418,6395.5,5040.2,5.2,30382.7,222
CesaroniK160,CTI,54,404,0.7,272.2,190.2,9.7,1521.7,182.9

## Design Task

Based on the requirements and available components, design a rocket that will reach the target apogee. Your design should include:

1. Motor selection (choose from the available motors list)
2. Body dimensions and material
3. Nose cone dimensions and material
4. Fin design and material
5. Parachute specifications
6. Launch rail configuration


### Notes
DRC are run on the design so you need to make sure the design is feasible.
Here are some of the checks:
Notes for the tail the top and bottom radius cannot be the same (causes error)
The material must be specified exactly as listed above
The body radius must be greater than the motor radius
Nose cone but by exactly one of the listed 
Don't include any additional python code (other than config. Putting calculation in there is ok like 32/4 but not whole functions

## Response Format

Please provide your design as a Python dictionary that can be directly used in our simulation software. Use the following format:

```python
config = {
    "motor_choice": "MOTOR_NAME",  # Choose from available motors
    "rocket_body": {
        "radius": RADIUS_IN_METERS,  # Body radius in meters (must be greater than motor Radius)
        "length": LENGTH_IN_METERS,  # Body length in meters
        "material": "MATERIAL",  # Choose from available materials
        "thickness": THICKNESS_IN_METERS,  # Wall thickness in meters
    },
    "aerodynamics": {
        "nose_cone": {
            "kind": "SHAPE",  # "conical", "ogive", "elliptical", "tangent", "von karman", "parabolic", "powerseries" or "lvhaack".
            "length": LENGTH_IN_METERS,
            "material": "MATERIAL",
        },
        "fins": {
            "number": NUMBER_OF_FINS,
            "root_chord": LENGTH_IN_METERS,
            "tip_chord": LENGTH_IN_METERS,
            "span": LENGTH_IN_METERS,
            "cant_angle": ANGLE_IN_DEGREES,
            "material": "MATERIAL",
            "thickness": THICKNESS_IN_METERS,
        },
        "tail": {
            "length": LENGTH_IN_METERS,
            "top_radius": RADIUS_IN_METERS,
            "bottom_radius": RADIUS_IN_METERS,
            "material": "MATERIAL",
        },
    },
    "parachutes": {
        "main": {
            "name": "Main",
            "cd_s": AREA,
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
        "drogue": {
            "name": "Drogue",
            "cd_s": AREA,
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
    },
    "launch": {
        "rail_length": LENGTH_IN_METERS, 
        "inclination": ANGLE_IN_DEGREES, #90 is vertical launch
        "heading": ANGLE_IN_DEGREES, # Heading in degrees 0 is up
    },
    "payload": { #point mass as position specified 
        "mass": MASS_IN_KG,
        "position": POSITION_IN_METERS,  # relative to rocket center
    },
}
```


Here's an example valid design. This is not at all indicative of what you should do just an example:

```python
config = {
    "motor_choice": "CesaroniO5800",
    "rocket_body": {
        "radius": 0.1,  # Body radius in meters
        "length": 1.2,    # Body length in meters
        "material": "fiberglass",
        "thickness": 0.01,  # Wall thickness in meters
    },
    "aerodynamics": {
        "nose_cone": {
            "kind": "ogive",
            "length": 0.3,  # Nose cone length in meters
            "material": "composite",
        },
        "fins": {
            "number": 4,
            "root_chord": 0.15,  # Fin root chord in meters
            "tip_chord": 0.075,  # Fin tip chord in meters
            "span": 0.3,         # Fin span in meters
            "cant_angle": 0.5,   # Cant angle in degrees
            "material": "carbon_fiber",
            "thickness": 0.005   # Fin thickness in meters
        },
        "tail": {
            "length": 1.2,  # Tail length in meters
            "top_radius": 0.04,  # Top radius in meters
            "bottom_radius": 0.05,  # Bottom radius in meters
            "material": "carbon_fiber",
        },
    },
    "parachutes": {
        "main": {
            "name": "Main",
            "cd_s": 0.25,  # Main parachute CD_s
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
        "drogue": {
            "name": "Drogue",
            "cd_s": 0.2,  # Drogue parachute CD_s
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
    },
    "launch": {
        "rail_length": 1.2,  # Length of the launch rail in meters
        "inclination": 90,   # Rail inclination in degrees (vertical)
        "heading": 0,        # Launch heading in degrees (straight up)
    },
    "payload": {
        "mass": 0.5,  # Payload mass in kg
        "position": 0.6  # Payload position relative to rocket center in meters
    }
}
```
Before answering you should provide your full reasoning for the design choices you made thinking like a rocket scientist. Run sample calulations, make approximations etc to find best design



=== PREVIOUS ATTEMPTS ===

--- ATTEMPT 1 ---
Design:
To design a rocket that meets the specified criteria, we need to keep in mind several factors including the motor choice, body dimensions, material selection, aerodynamic components, parachute specifications, and launch configuration. Below is the plan considering all the requirements:

### Step 1: Motor Selection
Given the requirements for a target apogee of 1000.0 meters, I will start by examining the thrust and burn time of the available motors. The motor must provide sufficient thrust to reach the desired altitude while allowing for a safe descent.

The **CesaroniO5800** provides a maximum thrust of 6395.5 N and a burn time of 5.2 seconds, which seems adequate. The impulse is also very high at 30,382.7 Ns, making it a good candidate for achieving the desired apogee. 

### Step 2: Rocket Body Design
The body radius must be greater than the motor radius, which is 0.075 meters for the **CesaroniO5800**. I will choose a body radius of **0.1 m** to ensure structural integrity and minimize drag. The body length would be **1.5 m**, providing enough volume for structural components and ensuring stability.

The body will be made from **fiberglass** due to its strength-to-weight ratio and sufficient stiffness.

- **Thickness**: At **0.005 m**, this would provide enough structural strength while keeping weight low.

### Step 3: Nose Cone Design
To minimize drag, a **conical nose cone** is effective. The length will be **0.3 m**, which is a reasonable size for a rocket of this diameter. The material will also be **fiberglass** for consistency in structural properties.

### Step 4: Fin Design
Four fins will provide stability during ascent and descent. Choosing a **root chord** of **0.15 m**, a **tip chord** of **0.075 m**, and a **span** of **0.25 m** will ensure that the fins are effective without being overly heavy. The fins will be **carbon_fiber** for additional rigidity and light weight.

### Step 5: Tail Design
The tail will guide the airflow and helps stabilize the rocket. I will use a tail length of **0.2 m** with a top radius of **0.04 m** and a bottom radius of **0.06 m**, ensuring stability and proper airflow. The tail material will also be **fiberglass**.

### Step 6: Parachute Specifications
Given the need to land safely (less than 5 m/s), I will use a main parachute with a CD_s area of **0.5 m^2** to ensure a low descent rate. The deployment trigger will be set to "apogee" to guarantee that it opens at the correct time. A smaller drogue parachute will also be used with an area of **0.2 m^2**, to slow the rocket down further.

### Step 7: Launch Rail Configuration
The launch rail will be **2.0 m long** and set at an inclination of **90 degrees** for a vertical launch. The heading will also be set to **0 degrees** with respect to gravity.

### Payload Consideration
I will include a payload mass of **1 kg**, which can represent sensors or other equipment essential for the mission. The payload will be placed at **0.8 m** from the rocket's center to maintain balance.

### Final Configuration
Compiling all the design elements together, here is the configuration for the rocket:

```python
config = {
    "motor_choice": "CesaroniO5800", 
    "rocket_body": {
        "radius": 0.1,  
        "length": 1.5,    
        "material": "fiberglass",
        "thickness": 0.005,  
    },
    "aerodynamics": {
        "nose_cone": {
            "kind": "conical", 
            "length": 0.3,  
            "material": "fiberglass",
        },
        "fins": {
            "number": 4,
            "root_chord": 0.15,  
            "tip_chord": 0.075,  
            "span": 0.25,         
            "cant_angle": 0,      
            "material": "carbon_fiber",
            "thickness": 0.005   
        },
        "tail": {
            "length": 0.2,  
            "top_radius": 0.04,  
            "bottom_radius": 0.06,  
            "material": "fiberglass",
        },
    },
    "parachutes": {
        "main": {
            "name": "Main",
            "cd_s": 0.5,  
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
        "drogue": {
            "name": "Drogue",
            "cd_s": 0.2,  
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
    },
    "launch": {
        "rail_length": 2.0,  
        "inclination": 90,   
        "heading": 0,        
    },
    "payload": {
        "mass": 1.0,  
        "position": 0.8  
    }
}
```

### Conclusion
This rocket design carefully considers the necessary components to reach the specified target conditions efficiently while maintaining safety and reliability in operational performance. With appropriate materials and configurations, it should perform well under the simulation environment.
Score: 10.90/100
Target Position: (3000.0m, 5000.0m), Landing Position: (-3480.89m, 0.00m), Error: 8185.47m
Structural integrity: PASSED
Cost: $1366.55

--- ATTEMPT 2 ---
Design:
To improve the rocket design to achieve the target landing position of (3000.0m, 5000.0m), I will refine the components and parameters based on the previous attempt, while keeping in mind the constraints and requirements:

1. **Motor Selection**: 
   - The **CesaroniO5800** motor’s high thrust is suitable, but given that it may lead to excess velocity, I'll consider the **CesaroniO3700** motor, which has a slightly lower thrust but longer burn time. This should reduce peak velocity and help with a controlled descent.
   - The **CesaroniO3700** offers lower thrust (4030.3 N) and a longer burn time (8.2 s) which provides better control for ascent.

2. **Rocket Body Design**:
   - I will use a body radius of **0.12 m**, which is slightly larger to ensure it is greater than the motor radius (0.161 m).
   - Body length will be **1.8 m**, allowing for more structure and stability. I'll use **carbon fiber** for light weight and strength, and maintain a wall thickness of **0.006 m**.

3. **Nose Cone Design**:
   - I'll stick with an ogive shape for reduced drag, with a length of **0.35 m** to improve aerodynamic efficiency. The material will again be **carbon fiber** to maintain consistency.

4. **Fin Design**:
   - To enhance stability, I will use **5 fins**. The root chord will be **0.2 m**, the tip chord **0.1 m**, and the span will also be **0.3 m**. The fins will be made of **carbon fiber** for strength, and their thickness will be **0.005 m**.

5. **Tail Design**:
   - For the tail section, I will use a length of **0.25 m**, with a top radius of **0.065 m** and bottom radius of **0.075 m** to ensure stability and proper airflow. The material choice remains **carbon fiber**.

6. **Parachute Specifications**:
   - For the main parachute, I will use a CD_s area of **0.8 m²**, which will significantly enhance the deceleration during descent and ensure a landing speed of less than 5 m/s.
   - The drogue parachute will have a CD_s area of **0.3 m²** for initial slowing of descent.

7. **Launch Rail Configuration**:
   - The launch rail length will be **2.5 m**, this will aid in maintaining stability during liftoff. The inclination will remain vertical (90 degrees) and the heading will be set to **0 degrees**.

8. **Payload Consideration**:
   - The payload mass will be **0.5 kg**, with its position set to **0.9 m** from the rocket center to ensure a well-balanced rocket.

### Final Configuration:

With these refinements in mind, here’s the updated rocket design configuration in the required format:

```python
config = {
    "motor_choice": "CesaroniO3700",  # Change to O3700 for more control
    "rocket_body": {
        "radius": 0.12,  # Body radius in meters
        "length": 1.8,   # Body length in meters
        "material": "carbon_fiber",  # Strong and lightweight
        "thickness": 0.006,  # Wall thickness in meters
    },
    "aerodynamics": {
        "nose_cone": {
            "kind": "ogive",  # Aerodynamically efficient nose cone
            "length": 0.35,   # Nose cone length in meters
            "material": "carbon_fiber",  # Consistent material
        },
        "fins": {
            "number": 5,  # Increased number of fins for stability
            "root_chord": 0.2,  # Fin root chord in meters
            "tip_chord": 0.1,   # Fin tip chord in meters
            "span": 0.3,        # Fin span in meters
            "cant_angle": 0,    # vertical fins
            "material": "carbon_fiber",  # Fins material
            "thickness": 0.005  # Fin thickness
        },
        "tail": {
            "length": 0.25,  # Tail length in meters
            "top_radius": 0.065,  # Top radius in meters
            "bottom_radius": 0.075,  # Bottom radius in meters
            "material": "carbon_fiber",  # Consistent material
        },
    },
    "parachutes": {
        "main": {
            "name": "Main",
            "cd_s": 0.8,  # Main parachute CD_s
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
        "drogue": {
            "name": "Drogue",
            "cd_s": 0.3,  # Drogue parachute CD_s
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
    },
    "launch": {
        "rail_length": 2.5,  # Length of the launch rail in meters
        "inclination": 90,    # Rail inclination in degrees (vertical)
        "heading": 0,         # Launch heading in degrees
    },
    "payload": {
        "mass": 0.5,  # Payload mass in kg
        "position": 0.9  # Payload position relative to rocket center in meters
    }
}
```

### Conclusion
This updated rocket design will enhance flight stability, control and safety during descent, while aiming to meet the target conditions for landing while minimizing the risks and ensuring structural integrity. The final assembly is focused on achieving ideal performance against the scoring metrics outlined. The use of lightweight materials like carbon fiber is crucial to maintaining weight efficiency and structural integrity. 

This configuration should yield a better score and a more successful flight.
Score: 40.62/100
Target Position: (3000.0m, 5000.0m), Landing Position: (-3862.89m, 0.00m), Error: 8491.13m
Structural integrity: PASSED
Cost: $2410.47


Based on previous attempts, please provide an improved rocket design that will precisely land at the target coordinates (3000.0m, 5000.0m).
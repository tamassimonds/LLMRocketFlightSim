# Rocket Design Task

## Design Requirements

- **Target Landing Position**: (3000.0m, 5000.0m) - land as close as possible to these coordinates
- **Target Apogee: 1000.0m
- **Wind Conditions**: 20 m/s from E direction

## You are scored off the following
Distance to max apogee
Cost: Cheaper the rocket the better the score
Does it land safely (less than 5 m/s)
Does it not break
Horz distance: How far is it from the intial launch site

#Score func code shown below:
# Apogee accuracy (25% of total score)
    apogee_error_percent = abs(actual_apogee - target_apogee) / target_apogee * 100
    apogee_reward = math.exp(-0.5 * (apogee_error_percent / 20)**2)  # 20% error = 1 sigma
    
    # Cost efficiency (15% of total score)
    cost_reward = math.exp(-0.5 * (total_cost / 1000)**2)  # Scale based on expected cost range
    
    # Safety (20% of total score)
    if structural_failure:
        safety_reward = 0.0
    else:
        # Impact velocity component
        safe_velocity = 10.0  # m/s
        velocity_reward = math.exp(-0.5 * ((impact_velocity - safe_velocity) / 5)**2)
        safety_reward = velocity_reward
    
    # Calculate weighted total reward
    total_reward = (
        0.45 * landing_reward +    # Landing accuracy
        0.35 * apogee_reward +     # Apogee accuracy
        0.15 * cost_reward +       # Cost efficiency
        0.05 * safety_reward       # Safety
    )


## Available Materials

The following materials are available for the rocket components:
aluminum, composite, fiberglass, carbon_fiber, balsa_wood, plywood, ABS_plastic

## Available Motors

Name,Manufacturer,Radius (mm),Length (mm),Dry Mass (kg),Max Thrust (N),Avg Thrust (N),Burn Time (s),Total Impulse (Ns),Isp (s)
Pro75M1670,CTI,75,757,1.815,2200,1533.9,3.9,6023.6,198
AeroTechK700W,AT,54,568,0.732,1029.3,658.7,3.5,2249,177.5
CesaroniM1670,CTI,75,757,3.101,2200,1533.9,3.6,6023.6,198
AeroTechH128W,AT,29,194,0.108,190.5,141.2,1.29,176.5,191.3
CesaroniO3700,CTI,161,957,14.194,4030.3,2836.9,8.2,29930.2,177.8
CesaroniO5800,CTI,150,754,12.418,6395.5,5040.2,5.2,30382.7,222
CesaroniK160,CTI,54,404,0.7,272.2,190.2,9.7,1521.7,182.9

## Design Task

Based on the requirements and available components, design a rocket that will reach the target apogee. Your design should include:

1. Motor selection (choose from the available motors list)
2. Body dimensions and material
3. Nose cone dimensions and material
4. Fin design and material
5. Parachute specifications
6. Launch rail configuration


### Notes
DRC are run on the design so you need to make sure the design is feasible.
Here are some of the checks:
Notes for the tail the top and bottom radius cannot be the same (causes error)
The material must be specified exactly as listed above
The body radius must be greater than the motor radius
Nose cone but by exactly one of the listed 
Don't include any additional python code (other than config. Putting calculation in there is ok like 32/4 but not whole functions

## Response Format

Please provide your design as a Python dictionary that can be directly used in our simulation software. Use the following format:

```python
config = {
    "motor_choice": "MOTOR_NAME",  # Choose from available motors
    "rocket_body": {
        "radius": RADIUS_IN_METERS,  # Body radius in meters (must be greater than motor Radius)
        "length": LENGTH_IN_METERS,  # Body length in meters
        "material": "MATERIAL",  # Choose from available materials
        "thickness": THICKNESS_IN_METERS,  # Wall thickness in meters
    },
    "aerodynamics": {
        "nose_cone": {
            "kind": "SHAPE",  # "conical", "ogive", "elliptical", "tangent", "von karman", "parabolic", "powerseries" or "lvhaack".
            "length": LENGTH_IN_METERS,
            "material": "MATERIAL",
        },
        "fins": {
            "number": NUMBER_OF_FINS,
            "root_chord": LENGTH_IN_METERS,
            "tip_chord": LENGTH_IN_METERS,
            "span": LENGTH_IN_METERS,
            "cant_angle": ANGLE_IN_DEGREES,
            "material": "MATERIAL",
            "thickness": THICKNESS_IN_METERS,
        },
        "tail": {
            "length": LENGTH_IN_METERS,
            "top_radius": RADIUS_IN_METERS,
            "bottom_radius": RADIUS_IN_METERS,
            "material": "MATERIAL",
        },
    },
    "parachutes": {
        "main": {
            "name": "Main",
            "cd_s": AREA,
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
        "drogue": {
            "name": "Drogue",
            "cd_s": AREA,
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
    },
    "launch": {
        "rail_length": LENGTH_IN_METERS, 
        "inclination": ANGLE_IN_DEGREES, #90 is vertical launch
        "heading": ANGLE_IN_DEGREES, # Heading in degrees 0 is up
    },
    "payload": { #point mass as position specified 
        "mass": MASS_IN_KG,
        "position": POSITION_IN_METERS,  # relative to rocket center
    },
}
```


Here's an example valid design. This is not at all indicative of what you should do just an example:

```python
config = {
    "motor_choice": "CesaroniO5800",
    "rocket_body": {
        "radius": 0.1,  # Body radius in meters
        "length": 1.2,    # Body length in meters
        "material": "fiberglass",
        "thickness": 0.01,  # Wall thickness in meters
    },
    "aerodynamics": {
        "nose_cone": {
            "kind": "ogive",
            "length": 0.3,  # Nose cone length in meters
            "material": "composite",
        },
        "fins": {
            "number": 4,
            "root_chord": 0.15,  # Fin root chord in meters
            "tip_chord": 0.075,  # Fin tip chord in meters
            "span": 0.3,         # Fin span in meters
            "cant_angle": 0.5,   # Cant angle in degrees
            "material": "carbon_fiber",
            "thickness": 0.005   # Fin thickness in meters
        },
        "tail": {
            "length": 1.2,  # Tail length in meters
            "top_radius": 0.04,  # Top radius in meters
            "bottom_radius": 0.05,  # Bottom radius in meters
            "material": "carbon_fiber",
        },
    },
    "parachutes": {
        "main": {
            "name": "Main",
            "cd_s": 0.25,  # Main parachute CD_s
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
        "drogue": {
            "name": "Drogue",
            "cd_s": 0.2,  # Drogue parachute CD_s
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
    },
    "launch": {
        "rail_length": 1.2,  # Length of the launch rail in meters
        "inclination": 90,   # Rail inclination in degrees (vertical)
        "heading": 0,        # Launch heading in degrees (straight up)
    },
    "payload": {
        "mass": 0.5,  # Payload mass in kg
        "position": 0.6  # Payload position relative to rocket center in meters
    }
}
```
Before answering you should provide your full reasoning for the design choices you made thinking like a rocket scientist. Run sample calulations, make approximations etc to find best design



=== PREVIOUS ATTEMPTS ===

--- ATTEMPT 1 ---
Design:
**Rocket Design Reasoning**

Designing a rocket to achieve a target apogee of 1000 meters while ensuring cost efficiency, safety, and precise landing requires careful consideration of each component. Below is a step-by-step reasoning for the design choices made:

### 1. Motor Selection
**Available Motors:**
- **CesaroniO5800**
  - **Total Impulse (Ns):** 30,382.7
  - **Average Thrust (N):** 5040.2
  - **Burn Time (s):** 5.2
  - **Mass (kg):** 12.418

**Reasoning:**
To reach an apogee of 1000 meters, a motor with sufficient total impulse is essential. The `CesaroniO5800` offers a high total impulse, ensuring enough thrust to propel the rocket to the desired altitude. Although it is one of the heavier motors, its high performance justifies the choice for achieving the target apogee.

### 2. Rocket Body Dimensions and Material
- **Body Radius:** 0.15 meters
- **Body Length:** 1.5 meters
- **Material:** Carbon Fiber
- **Wall Thickness:** 0.005 meters

**Reasoning:**
A body radius of 0.15 meters ensures it is larger than the motor radius (0.075 meters), adhering to design constraints. Carbon fiber is chosen for its excellent strength-to-weight ratio, minimizing the overall mass while maintaining structural integrity. A length of 1.5 meters provides adequate space for payload and stability.

### 3. Nose Cone Dimensions and Material
- **Kind:** Ogive
- **Length:** 0.3 meters
- **Material:** Carbon Fiber

**Reasoning:**
An ogive nose cone is selected for its aerodynamic efficiency, reducing drag and contributing to a stable flight path. Carbon fiber material ensures durability and minimal weight addition.

### 4. Fin Design and Material
- **Number of Fins:** 4
- **Root Chord:** 0.15 meters
- **Tip Chord:** 0.075 meters
- **Span:** 0.3 meters
- **Cant Angle:** 5 degrees
- **Material:** Carbon Fiber
- **Thickness:** 0.005 meters

**Reasoning:**
Four fins provide symmetrical stability, essential for accurate flight and landing. The dimensions are optimized for balance between aerodynamic efficiency and structural strength. Carbon fiber fins ensure lightweight and durable construction.

### 5. Tail Design
- **Length:** 0.2 meters
- **Top Radius:** 0.04 meters
- **Bottom Radius:** 0.05 meters
- **Material:** Carbon Fiber

**Reasoning:**
A tapered tail with different top and bottom radii prevents structural errors during design runs. Carbon fiber is used to maintain strength while keeping the tail lightweight.

### 6. Parachute Specifications
- **Main Parachute CD_s:** 0.25
- **Drogue Parachute CD_s:** 0.2
- **Trigger:** Apogee
- **Sampling Rate:** 105 Hz
- **Lag:** 1.5 seconds
- **Noise:** (0, 8.3, 0.5)

**Reasoning:**
The main parachute ensures a safe landing by reducing impact velocity below 5 m/s. The drogue parachute provides stability during descent. The specified parameters ensure reliable deployment and effective noise filtering for accurate triggering.

### 7. Launch Rail Configuration
- **Rail Length:** 1.2 meters
- **Inclination:** 90 degrees (Vertical Launch)
- **Heading:** 0 degrees (Straight Up)

**Reasoning:**
A vertical launch minimizes horizontal displacement, essential for landing accuracy. A 1.2-meter rail provides sufficient guidance during the initial phase of the launch, ensuring stability.

### 8. Payload Specifications
- **Mass:** 0.5 kg
- **Position:** 0.6 meters relative to rocket center

**Reasoning:**
A lightweight payload ensures that the rocket remains within the mass constraints for optimal performance. Positioning the payload towards the front balances the center of gravity, enhancing stability.

### Summary of Design Choices
- **Motor:** Selected for high total impulse to achieve target apogee.
- **Materials:** Carbon fiber chosen for its superior strength-to-weight ratio.
- **Dimensions:** Optimized for stability, aerodynamic efficiency, and compliance with design constraints.
- **Parachutes and Launch Configuration:** Designed to ensure safe and accurate landing.

The final design adheres to all specified requirements and constraints, ensuring feasibility and optimal performance in simulations.

```python
config = {
    "motor_choice": "CesaroniO5800",
    "rocket_body": {
        "radius": 0.15,  # Body radius in meters (greater than motor radius of 0.075m)
        "length": 1.5,    # Body length in meters
        "material": "carbon_fiber",
        "thickness": 0.005,  # Wall thickness in meters
    },
    "aerodynamics": {
        "nose_cone": {
            "kind": "ogive",
            "length": 0.3,  # Nose cone length in meters
            "material": "carbon_fiber",
        },
        "fins": {
            "number": 4,
            "root_chord": 0.15,  # Fin root chord in meters
            "tip_chord": 0.075,  # Fin tip chord in meters
            "span": 0.3,         # Fin span in meters
            "cant_angle": 5,     # Cant angle in degrees
            "material": "carbon_fiber",
            "thickness": 0.005,  # Fin thickness in meters
        },
        "tail": {
            "length": 0.2,          # Tail length in meters
            "top_radius": 0.04,     # Top radius in meters
            "bottom_radius": 0.05,  # Bottom radius in meters
            "material": "carbon_fiber",
        },
    },
    "parachutes": {
        "main": {
            "name": "Main",
            "cd_s": 0.25,  # Main parachute CD_s
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
        "drogue": {
            "name": "Drogue",
            "cd_s": 0.2,  # Drogue parachute CD_s
            "trigger": "apogee",
            "sampling_rate": 105,
            "lag": 1.5,
            "noise": (0, 8.3, 0.5),
        },
    },
    "launch": {
        "rail_length": 1.2,   # Length of the launch rail in meters
        "inclination": 90,    # Rail inclination in degrees (vertical)
        "heading": 0,         # Launch heading in degrees (straight up)
    },
    "payload": {
        "mass": 0.5,           # Payload mass in kg
        "position": 0.6,      # Payload position relative to rocket center in meters
    },
}
```
Score: 6.17/100
Target Position: (3000.0m, 5000.0m), Landing Position: (-2775.26m, 95.12m), Error: 7577.03m
Structural integrity: PASSED
Cost: $2259.51


Based on previous attempts, please provide an improved rocket design that will precisely land at the target coordinates (3000.0m, 5000.0m).